<div class="main-content">
    <div class="consulta-container">
      <!-- Panel izquierdo - Información del paciente -->
      <div class="profile-panel">
        <div class="profile-photo">
          <div *ngIf="!pacientePhotoUrl" class="profile-placeholder">
            <span class="profile-initials">{{ getInitials() }}</span>
          </div>
          <img *ngIf="pacientePhotoUrl" [src]="pacientePhotoUrl" alt="Foto del paciente" class="patient-photo">
        </div>
  
        <div class="profile-details">
          <h2 class="patient-name" *ngIf="paciente">
            {{ paciente.nombre }} {{ paciente.apellidos }}
          </h2>
          <p class="patient-id" *ngIf="paciente">C.C. {{ paciente.numero_documento }}</p>
          <p class="doctor-info">
            <ng-container *ngIf="!cargandoDoctor">Dr. {{ nombreDoctor }}</ng-container>
            <ng-container *ngIf="cargandoDoctor">Cargando...</ng-container>
          </p>
        </div>
  
        <div class="action-buttons">
          <button class="btn-cancel" (click)="cancelar()">Cancelar</button>
          <button type="button" class="btn-save" (click)="guardarConsulta()" [disabled]="guardando" >  <div *ngIf="guardando" class="spinner-small"></div>
            <span *ngIf="!guardando">Guardar Consulta</span>
            <span *ngIf="guardando">Guardando...</span></button>
        </div>
      </div>
  
      <!-- Panel derecho - Formulario de consulta -->
      <div class="right-panel">
        <form [formGroup]="consultaForm">
          <!-- Sección: Datos de la consulta -->
          <div class="data-section">
            <h3 class="section-title">Datos de la consulta</h3>
            <div class="section-divider"></div>
  
            <div class="data-grid">
              <div class="data-row">
                <div class="data-field-label">Motivo de consulta</div>
                <div class="data-field-input">
                  <input type="text" formControlName="motivo" placeholder="Ingrese el motivo">
                </div>
              </div>
  
              <div class="data-row alt-bg">
                <div class="data-field-label">Enfermedades importantes</div>
                <div class="data-field-input">
                  <textarea formControlName="enfermedad_actual" placeholder="Describa las enfermedades importantes"></textarea>
                </div>
              </div>
  
              <div class="data-row">
                <div class="data-field-label">Mundo ideal</div>
                <div class="data-field-input">
                  <textarea formControlName="objetivos_terapia" placeholder="Describa el mundo ideal"></textarea>
                </div>
              </div>
  
              <div class="data-row alt-bg">
                <div class="data-field-label">Tratamientos anteriores</div>
                <div class="data-field-input">
                  <textarea formControlName="historia_problema" placeholder="Describa los tratamientos anteriores"></textarea>
                </div>
              </div>
  
            </div>
          </div>
  
          <!-- Sección: Diagnóstico -->
          <div class="data-section">
            <h3 class="section-title">Diagnóstico</h3>
            <div class="section-divider"></div>
  
            <div class="data-grid">
              <div class="data-row">
                <div class="data-field-label">Tipo de diagnóstico</div>
                <div class="data-field-input">
                  <input type="text" formControlName="tipo_diagnostico" placeholder="Especifique el tipo">
                </div>
              </div>
  
            </div>
          </div>
  
          <!-- Sección: Plan y tratamiento -->
          <div class="data-section">
            <h3 class="section-title">Plan y tratamiento</h3>
            <div class="section-divider"></div>
  
            <div class="data-grid">
              <div class="data-row">
                <div class="data-field-label">Plan de tratamiento</div>
                <div class="data-field-input">
                  <textarea formControlName="plan_tratamiento" placeholder="Describa el plan"></textarea>
                </div>
              </div>
  
              <div class="data-row alt-bg">
                <div class="data-field-label">Recomendaciones</div>
                <div class="data-field-input">
                  <textarea formControlName="recomendaciones" placeholder="Ingrese recomendaciones"></textarea>
                </div>
              </div>
              <div class="data-row">
                <div class="data-field-label">Contraindicaciones</div>
                <div class="data-field-input">
                  <textarea formControlName="contraindicaciones" placeholder="Ingrese las contraindicaciones"></textarea>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
